(function(){var e;e=jQuery;e.fn.flexNav=function(t){var n,r,i,s,o,u,a,f,l,c,h,p;l=e.extend({animationSpeed:250,transitionOpacity:true,buttonSelector:".menu-button",hoverIntent:false,hoverIntentTimeout:150,calcItemWidths:false,hover:true},t);n=e(this);n.addClass("with-js");if(l.transitionOpacity===true){n.addClass("opacity")}n.find("li").each(function(){if(e(this).has("ul").length){return e(this).addClass("item-with-ul").find("ul").hide()}});if(l.calcItemWidths===true){r=n.find(">li");s=r.length;u=100/s;o=u+"%"}if(n.data("breakpoint")){i=n.data("breakpoint")}c=function(){if(n.hasClass("lg-screen")===true&&l.hover===true){if(l.transitionOpacity===true){return e(this).find(">ul").addClass("flexnav-show").stop(true,true).animate({height:["toggle","swing"],opacity:"toggle"},l.animationSpeed)}else{return e(this).find(">ul").addClass("flexnav-show").stop(true,true).animate({height:["toggle","swing"]},l.animationSpeed)}}};a=function(){if(n.hasClass("lg-screen")===true&&e(this).find(">ul").hasClass("flexnav-show")===true&&l.hover===true){if(l.transitionOpacity===true){return e(this).find(">ul").removeClass("flexnav-show").stop(true,true).animate({height:["toggle","swing"],opacity:"toggle"},l.animationSpeed)}else{return e(this).find(">ul").removeClass("flexnav-show").stop(true,true).animate({height:["toggle","swing"]},l.animationSpeed)}}};f=function(){var t;if(e(window).width()<=i){n.removeClass("lg-screen").addClass("sm-screen");if(l.calcItemWidths===true){r.css("width","100%")}t=l["buttonSelector"]+", "+l["buttonSelector"]+" .touch-button";e(t).removeClass("active");return e(".one-page li a").on("click",function(){return n.removeClass("flexnav-show")})}else if(e(window).width()>i){n.removeClass("sm-screen").addClass("lg-screen");if(l.calcItemWidths===true){r.css("width",o)}n.removeClass("flexnav-show").find(".item-with-ul").on();e(".item-with-ul").find("ul").removeClass("flexnav-show");a();if(l.hoverIntent===true){return e(".item-with-ul").hoverIntent({over:c,out:a,timeout:l.hoverIntentTimeout})}else if(l.hoverIntent===false){return e(".item-with-ul").on("mouseenter",c).on("mouseleave",a)}}};e(l["buttonSelector"]).data("navEl",n);p=".item-with-ul, "+l["buttonSelector"];e(p).append('<span class="touch-button"><i class="icon-down-open-big"></i></span>');h=l["buttonSelector"]+", "+l["buttonSelector"]+" .touch-button";e(h).on("click",function(t){var n,r,i;e(h).toggleClass("active");t.preventDefault();t.stopPropagation();i=l["buttonSelector"];n=e(this).is(i)?e(this):e(this).parent(i);r=n.data("navEl");return r.toggleClass("flexnav-show")});e(".touch-button").on("click",function(t){var r,i;r=e(this).parent(".item-with-ul").find(">ul");i=e(this).parent(".item-with-ul").find(">span.touch-button");if(n.hasClass("lg-screen")===true){e(this).parent(".item-with-ul").siblings().find("ul.flexnav-show").removeClass("flexnav-show").hide()}if(r.hasClass("flexnav-show")===true){r.removeClass("flexnav-show").slideUp(l.animationSpeed);return i.removeClass("active")}else if(r.hasClass("flexnav-show")===false){r.addClass("flexnav-show").slideDown(l.animationSpeed);return i.addClass("active")}});n.find(".item-with-ul *").focus(function(){e(this).parent(".item-with-ul").parent().find(".open").not(this).removeClass("open").hide();return e(this).parent(".item-with-ul").find(">ul").addClass("open").show()});f();return e(window).on("resize",f)}}).call(this)